<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Untitled Document</title>
    <!-- Bootstrap -->
	<link href="../css/bootstrap.css" rel="stylesheet">
	<link href="../css/index.css" type="text/css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
  </head>
  <body>
	  <div class="header">
		  <nav class="navbar navbar-default">
		  <div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
			  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			  </button>
			  <a class="navbar-brand" href="#">可视化参数仿真平台</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			  <ul class="nav navbar-nav">
				<li class="dropdown navbar-nav-list">
				  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">实践应用 <span class="caret"></span></a>
				  <ul class="dropdown-menu">
					<li><a href="#">jQuery选择器</a></li>
					<li><a href="#">jQuery事件</a></li>
					<li><a href="#">jQuery隐藏/显示</a></li>
					<li><a href="#">jQuery淡入淡出</a></li>
					<li><a href="#">jQuery滑动</a></li>
				  </ul>
				</li>
			    <li class="dropdown navbar-nav-list">
				  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">学习指南 <span class="caret"></span></a>
				  <ul class="dropdown-menu">
					<li><a href="#">Action</a></li>
					<li><a href="#">Another action</a></li>
					<li><a href="#">Something </a></li>
					<li><a href="#">Separated link</a></li>
					<li><a href="#">One more k</a></li>
				  </ul>
				</li>
				<li class="dropdown  navbar-nav-list">
				  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">系统介绍 <span class="caret"></span></a>
				  <ul class="dropdown-menu">
					<li><a href="#">Action</a></li>
					<li><a href="#">Another action</a></li>
					<li><a href="#">Something else</a></li>
					<li><a href="#">Separated link</a></li>
					<li><a href="#">One more</a></li>
				  </ul>
				</li>
			  </ul>
			</div><!-- /.navbar-collapse -->
		  </div><!-- /.container-fluid -->
		</nav>
	  </div>
<!--	  <div class="content">-->
		<!--left左边列表-->
		<div class="left col-lg-2 col-xs-2 col-md-2 col-ms-2">
		  <div class="list-group">
			  <div class="list-group-title list-group-item">jQuery动画</div>
			  <button data-name="width" type="button" class="list-group-item">宽度</button>
			  <button data-name="height" type="button" class="list-group-item">高度</button>
			  <button data-name="opacity" type="button" class="list-group-item">透明度</button>
			  <button data-name="top" type="button" class="list-group-item">上定位</button>
			  <button data-name="bottom" type="button" class="list-group-item">下定位</button>
		  </div>
		</div>
	  	<!--center中间布局-->
		<div class="center col-lg-5 col-xs-5 col-md-5 col-ms-5">
			<div class="title">参数设置：</div>
			<div class="info">说明：点击左侧菜单添加配置，根据动画配置的参数，点击执行按钮查看动画效果。<br>注：距离操作单位为px</div>
			<div class="params">
				<div class="tips">点击左侧添加动画</div>
				<div class="speed">
					动画时间：<input type="type" placeholder="默认500毫秒" id="j-speed">
				</div>
			</div>
			<div class="item" style="width:100%;text-align:center;">
				<input type="button" value="执行动画" class="button" data-type="order">&nbsp;
				<input type="button" value="动画队列" class="button" data-type="queue">&nbsp;
				<input type="button" value="还原" class="reset">
			</div>
			<div class="log">
				<div class="tit">操作日志：</div>
				<div class="detail">

				</div>
			</div>
		</div>
	  		
		<!--右边展示布局-->
		<div class="right col-lg-5 col-xs-5 col-md-5 col-ms-5">
			<!--演示结果-->
			<div class="wrapper">
				<div class="title">演示结果：</div>
				<div class="result">
					<img src="../images/san.png" width="60" class="target">
				</div>
			</div>
		</div>
<!--	  </div>-->
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) --> 
	<script src="../js/jquery-1.11.3.min.js"></script>
	<script>
		//结果集
		var result = [];
		//初始速度
		var _speed = 500;
		$(function(){
			//左边按钮点击出现在中间位置
			$('.list-group>button').on('click',function(){
				//清空结果集
				result = [];
				//获取data-name的值
				var name = $(this).data('name');
//				alert(name);
				var title = $(this).text();
//				alert(title);
				//隐藏提示框
				$('.params>.tips').hide();
				//显示速度框
				$('.params>.speed').show();
				//判断是否已经添加属性
				var flag = true;
				$('.params>.item').each(function(index,element){
					var names = $(element).find('input').data('class');
						if(names==name){
							alert('此属性已添加');
							flag=false;
							return;
						}
				})
				// 添加配置
				if(flag){
					$('.params').append('<div class="item">'+
						'<span>'+title+'：</span><input type="input" value="" data-class='+name+' data-title='+title+' >'+
						'</div>');
				}
				})
				
			
			//执行动画
			$('.button').on('click',function(){
				$('.log>.detail').html('');
				$('.params>.item').each(function(index,element){
//					console.log($(element).val());
							var values = $(element).find('input').val();
							var name = $(element).find('input').data('class');
							var title = $(element).find('input').data('title');
							result.push({
								values:values,
								name:name,
								title:title
							});
//							alert(typeof($('#j-speed').val()));
							_speed = $('#j-speed').val()||500;
//							alert(_speed);
//							console.log(result);
				})
				if(result.length==0){
					alert('执行失败，请添加动画效果后执行！');
					return;
				}
				for(var key in result){
					if(!result[key].values){
						alert('执行失败，请填写完整的参数！');
						result = [];
						return;
					}
				}
				
				
				if($(this).data('type')=="order"){
					$('.log>.detail').append("执行顺序动画");
//					alert('order');
					orderDo();
				}else{
					$('.log>.detail').append("执行队列动画");
//					alert('queue');
					queueDo();
				}
				//清空结果集
				result = [];
			})
			
			//顺序执行动画
			function orderDo(){
				var param = {};
				for(var key in result){
					if(result[key].name=='opacity'){
						param[result[key].name] = result[key].values;
					}else{
						param[result[key].name] = result[key].values+'px';
					}
					$('.log>.detail').append('<div class="step">执行：设置'+result[key].name+':'+param[result[key].name]+'</div>');
				}
//				console.log(param);
				$('.target').animate(param,_speed);
				$('.log>.detail').append('<div class="step">代码animate('+JSON.stringify(param)+','+_speed+')</div>');
			}
			//队列执行动画
			function queueDo(){
				var param = {};
				for(var key in result){
					if(result[key].name=='opacity'){
						param[result[key].name] = result[key].values;
					}else{
						param[result[key].name] = result[key].values+'px';
					}
					$('.log>.detail').append('<div class="step">执行：设置'+result[key].name+':'+param[result[key].name]+'代码:animate({'+result[key].name+':'+param[result[key].name]+'},'+_speed+')</div>');
//					$('.log>.detail').append('<div class="step">代码:animate('+JSON.stringify(param)+','+_speed+')</div>');
					$('.target').animate(param,_speed);
				}
			}
			
			$('.reset').click(function(){
				$('.params>.item').remove();
				$('.params>.speed').hide();
				$('.params>.tips').show();
				$('.log>.detail').html('');
			})
			
		})
	</script>
	<!-- Include all compiled plugins (below), or include individual files as needed --> 
	<script src="../js/bootstrap.js"></script>
  </body>
</html>